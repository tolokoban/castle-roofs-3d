require("three.canvas",function(e,t){"use strict";function r(e){s.length>0&&(s.forEach(function(t){t.render(e)}),window.requestAnimationFrame(r))}function n(e){-1==s.indexOf(e)&&(s.push(e),1==s.length&&window.requestAnimationFrame(r))}function i(e){var t=s.indexOf(e);t>-1&&s.splice(t,1)}function o(e,t,r){var n=[];if(3==t.length)n.push(new THREE.Face3(t[0],t[1],t[2]));else if(4==t.length)n.push(new THREE.Face3(t[0],t[1],t[2]),new THREE.Face3(t[0],t[2],t[3]));else{var i=0,o=0,s=0;t.forEach(function(r){var n=e.vertices[t[r]];i+=n.x,o+=n.y,s+=n.z}),i/=t.length,o/=t.length,s/=t.length;var a=t.length;e.vertices.push(new THREE.Vector3(i,o,s));var h;for(h=0;a>h;h++)n.push(new THREE.Face3(h,(h+1)%a,a))}"undefined"!=typeof r&&n.forEach(function(e){e.vertexColors[0]=e.vertexColors[1]=e.vertexColors[2]=r}),n.forEach(function(t){e.faces.push(t)})}var s=[],a=function(e){"undefined"==typeof e&&(e={}),"undefined"==typeof e.width&&(e.width=window.innerWidth),"undefined"==typeof e.height&&(e.height=window.innerHeight);var t=document.createElement("div");t.className="three-canvas",Object.defineProperty(this,"element",{value:t,writable:!1,configurable:!0,enumerable:!0}),this.W=e.width,this.H=e.height,t.style.width=this.W+"px",t.style.height=this.H+"px",this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(45,this.W/this.H,.1,1e3),this.camera.position.z=1.4,this.renderer=new THREE.WebGLRenderer({alpha:!1}),this.renderer.setClearColor(3355443,0),this.renderer.setSize(this.W,this.H),t.appendChild(this.renderer.domElement),this._time=0};a.prototype.setCamera=function(e,t,r,n,i,o){this.camera.position.x=parseFloat(e),this.camera.position.y=parseFloat(t),this.camera.position.z=parseFloat(r),"number"==typeof n&&this.camera.lookAt(new THREE.Vector3(parseFloat(n),parseFloat(i),parseFloat(o)))},a.prototype.render=function(e){this._time<=0&&(this._time=e-1),this.onRender(e,e-this._time),this.renderer.render(this.scene,this.camera),this._time=e},a.prototype.onRender=function(e,t){},a.prototype.start=function(){n(this)},a.prototype.stop=function(){i(this)},a.prototype.createMesh=function(e){if("undefined"==typeof e)throw Error("[three.canvas.createMesh] Missing optument!");"undefined"==typeof e.colors&&(e.colors=[new THREE.Color(.5+.5*Math.random(),.5+.5*Math.random(),.5+.5*Math.random())]),"undefined"==typeof e.nbColors&&(e.nbColors=e.colors.length),"undefined"==typeof e.solid&&(e.solid=!0),"undefined"==typeof e.wireframe&&(e.wireframe=!0),"undefined"==typeof e.wirecolor&&(e.wirecolor=new THREE.Color(3355443)),"undefined"==typeof e.wirewidth&&(e.wirewidth=2),"undefined"==typeof e.doublesided&&(e.doublesided=!1),"undefined"==typeof e.mat&&(e.mat=new THREE.MeshPhongMaterial({specular:3355443,shininess:3.14,metal:!0,vertexColors:THREE.VertexColors,side:e.doublesided?THREE.DoubleSide:THREE.FrontSide,transparent:!0,opacity:.9}));var t=new THREE.Group;if(e.solid){var r=new THREE.Geometry;e.vertices.forEach(function(e){r.vertices.push(new THREE.Vector3(e[0],e[1],e[2]))}),e.faces.forEach(function(t,n){o(r,t,e.colors[n%e.nbColors])}),r.computeFaceNormals(),r.computeVertexNormals(),t.add(new THREE.Mesh(r,e.mat))}if(e.wireframe){var n=new THREE.LineBasicMaterial({color:e.wirecolor,linewidth:e.wirewidth}),i=[];e.faces.forEach(function(r){for(var o,s,a,h,c,d=0;d<r.length;d++)a=r[d],h=r[(d+1)%r.length],a>h&&(c=a,a=h,h=c),s=a+","+h,-1==i.indexOf(s)&&(i.push(s),o=new THREE.Geometry,o.vertices.push(new THREE.Vector3(e.vertices[a][0],e.vertices[a][1],e.vertices[a][2]),new THREE.Vector3(e.vertices[h][0],e.vertices[h][1],e.vertices[h][2])),o.type=THREE.Lines,t.add(new THREE.Line(o,n)))})}return t},a.create=function(e){return new a(e)},t.exports=a});
//# sourceMappingURL=three.canvas.js.map