require("follower",function(t,o){function i(t){this._args=t,this._x=this._z=0,this._y=20,this._time=0,this._looks=[s.bind(this)]}function s(t){}var a=[[-1,0],[0,-1],[1,0],[0,1]];i.prototype.look=function(t){var o,i,s,h,n,r,e,c,p,x,_,f=.006,l=this._args.camera,z=this._args.castle,M=this._args.mesh.position,g=this._args.mesh.rotation.y,y=this._time,m=5;if(y>0){r=z.x2col(M.x),e=z.z2row(M.z);var u=z.getHeight(r,e);i=0,s=u,o=Math.floor(g+Math.PI/8)%4,0>o&&(o+=4),[o,(o+1)%4,(o+3)%4,(o+2)%4].forEach(function(t){for(var o,c=r,p=e,x=a[t],_=u,f=1;m>f&&(c+=x[0],p+=x[1],o=Math.max(_,z.getHeight(c,p)),!(Math.abs(o-_)>.33));f++)_=o,f>i&&(i=f,s=o,h=c,n=p)});var v=z.col2x(h),w=s+1.5,E=z.row2z(n),H=t-y;.1*Math.cos(7e-4*t);if(v=M.x,w=M.y+.8,E=M.z,c=v-l.position.x,p=w-l.position.y,x=E-l.position.z,_=Math.sqrt(c*c+p*p+x*x),H*f>_)l.position.x=v,l.position.y=w,l.position.z=E;else{var k=H*f/_;l.position.x+=c*k,l.position.y+=p*k,l.position.z+=x*k}}this._time=t,l.position=new THREE.Vector3(M.x,M.y+.8,M.z),l.lookAt(new THREE.Vector3(M.x-Math.sin(g-Math.PI/2),M.y+.8,M.z-Math.cos(g-Math.PI/2)))},o.exports=i});
//# sourceMappingURL=follower.js.map