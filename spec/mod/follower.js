require("follower",function(t,i){function o(t){this._args=t,this._x=this._z=0,this._y=20,this._time=0}o.prototype.look=function(t){var i,o,s,h,a,e,r,n,x,c,p,z,g,_=.006,l=this._args.camera,M=this._args.castle,f=this._args.mesh.position,m=this._args.mesh.rotation.y,y=this._time,w=5;if(y>0){o=M.x2col(f.x),s=M.z2row(f.z);var u=M.getHeight(o,s),v=t-y,H=.1*Math.cos(7e-4*t),k=f.x-w*Math.cos(m),q=f.z+w*Math.sin(m);o=M.z2row(k),s=M.x2col(q);var E=Math.max(u-.4,M.getHeight(o,s));for(g=E-u,i=w,n=w-1;n>0;n--)c=f.x-n*Math.cos(m),p=f.z+n*Math.sin(m),o=M.x2col(c),s=M.z2row(p),x=M.getHeight(o,s),0==x&&(x=u),z=(x-u)/n,z>g&&(i=n,g=z,k=c,q=p,E=x);if(i-=.8,k=f.x-i*Math.cos(m+H),q=f.z+i*Math.sin(m+H),E+=1.5,h=k-l.position.x,a=E-l.position.y,e=q-l.position.z,r=Math.sqrt(h*h+a*a+e*e),isNaN(r),v*_>r)l.position.x=k,l.position.y=E,l.position.z=q;else{var N=v*_/r;l.position.x+=h*N,l.position.y+=a*N,l.position.z+=e*N}}this._time=t,l.lookAt(new THREE.Vector3(f.x,f.y+1,f.z))},i.exports=o});
//# sourceMappingURL=follower.js.map